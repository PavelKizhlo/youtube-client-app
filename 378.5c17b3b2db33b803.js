"use strict";(self.webpackChunkyoutube_client_app=self.webpackChunkyoutube_client_app||[]).push([[378],{6378:(B,f,s)=>{s.r(f),s.d(f,{YoutubeModule:()=>q});var u=s(2965),v=s(529),x=s(3781),t=s(4650),D=s(1375),C=s(3095),b=s(4004),Z=s(8505),P=s(3900),O=s(7317),I=s(9653);let m=(()=>{class n{constructor(e,a){this.http=e,this.store=a}getVideoList(e){return(e?this.getSearchedVideos(e):this.getPopularVideos()).pipe((0,b.U)(r=>r.items),(0,Z.b)(r=>this.store.dispatch((0,O.X)({response:[...r]}))))}getSingleVideo(e){return this.http.get("/videos",{params:{part:"snippet,statistics",id:e}}).pipe((0,b.U)(a=>a.items[0]))}getPopularVideos(){return this.http.get("/videos",{params:{part:"snippet,statistics",chart:"mostPopular",regionCode:"BY",maxResults:"20"}})}getSearchedVideos(e){return this.http.get("/search",{params:{part:"snippet",maxResults:"20",q:e}}).pipe((0,P.w)(a=>{const r=a.items.map(o=>o.id.videoId);return this.http.get("/videos",{params:{part:"snippet,statistics",id:r}})}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(v.eN),t.LFG(I.yh))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var p=s(6895),A=s(4859),y=s(7392),c=s(3546);let S=(()=>{class n{constructor(e,a){this.element=e,this.renderer=a}ngOnInit(){let e;this.date=new Date(this.publishedAt);const o=((new Date).getTime()-this.date.getTime())/864e5;e=o<7?"#5757ff":o>7&&o<30.5?"#28a711":o>30.5&&o<183?"#e3c800":"#c10000",this.renderer.setStyle(this.element.nativeElement,"A"===this.element.nativeElement.tagName?"background-color":"border-color",e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj))},n.\u0275dir=t.lG2({type:n,selectors:[["","appDateStatus",""]],inputs:{publishedAt:["appDateStatus","publishedAt"]}}),n})();const T=function(n){return["id",n]};let M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-search-item"]],inputs:{searchItemData:"searchItemData"},decls:21,vars:9,consts:[[1,"card",3,"appDateStatus"],[1,"card-content"],["mat-card-image","",3,"src"],[1,"stat"],[1,"stat-item"],["fontIcon","visibility"],[1,"stat-text"],["fontIcon","favorite"],["fontIcon","comment"],[1,"mat-title","card-title"],[1,"button-block"],["mat-raised-button","","color","primary",1,"more-button",3,"routerLink"]],template:function(e,a){1&e&&(t.TgZ(0,"mat-card",0)(1,"mat-card-content",1),t._UZ(2,"img",2),t.TgZ(3,"div",3)(4,"div",4),t._UZ(5,"mat-icon",5),t.TgZ(6,"span",6),t._uU(7),t.qZA()(),t.TgZ(8,"div",4),t._UZ(9,"mat-icon",7),t.TgZ(10,"span",6),t._uU(11),t.qZA()(),t.TgZ(12,"div",4),t._UZ(13,"mat-icon",8),t.TgZ(14,"span",6),t._uU(15),t.qZA()()()(),t.TgZ(16,"mat-card-title",9),t._uU(17),t.qZA(),t.TgZ(18,"mat-card-actions",10)(19,"a",11),t._uU(20,"More ..."),t.qZA()()()),2&e&&(t.Q6J("appDateStatus",a.searchItemData.snippet.publishedAt),t.xp6(2),t.Q6J("src",a.searchItemData.snippet.thumbnails.high.url,t.LSH),t.xp6(5),t.Oqu(a.searchItemData.statistics.viewCount),t.xp6(4),t.Oqu(a.searchItemData.statistics.likeCount),t.xp6(4),t.Oqu(a.searchItemData.statistics.commentCount),t.xp6(2),t.Oqu(a.searchItemData.snippet.title),t.xp6(2),t.Q6J("routerLink",t.VKq(7,T,a.searchItemData.id)))},dependencies:[A.zs,y.Hw,c.a8,c.dn,c.n5,c.hq,c.G2,u.yS,S],styles:[".card[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;width:312px;height:100%;box-sizing:border-box;border-bottom:10px solid}.card-content[_ngcontent-%COMP%]{border-radius:4px 4px 0 0}.card-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.stat[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center}.stat-text[_ngcontent-%COMP%]{margin-left:5px}.button-block[_ngcontent-%COMP%]{text-align:center}.button-block[_ngcontent-%COMP%]   .more-button[_ngcontent-%COMP%]{width:120px}"]}),n})();function w(n,i){1&n&&t._UZ(0,"app-search-item",2),2&n&&t.Q6J("searchItemData",i.$implicit)}let U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-search-list"]],inputs:{searchData:"searchData"},decls:2,vars:1,consts:[[1,"container"],[3,"searchItemData",4,"ngFor","ngForOf"],[3,"searchItemData"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.YNc(1,w,1,1,"app-search-item",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",a.searchData))},dependencies:[p.sg,M],styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(312px,1fr));grid-auto-rows:max-content;justify-items:center;gap:20px;padding:20px}"]}),n})(),F=(()=>{class n{transform(e,a){return a.trim()?e.filter(r=>r.snippet.title.toLowerCase().includes(a.trim().toLowerCase())):e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"searchFilter",type:n,pure:!0}),n})(),L=(()=>{class n{transform(e,a){const{type:r,sort:o}=a;return"date"===r&&e.sort((h,g)=>{const l=new Date(h.snippet.publishedAt).getTime(),d=new Date(g.snippet.publishedAt).getTime();switch(o){case"asc":return l-d;case"desc":return d-l;default:return 0}}),"views"===r&&e.sort((h,g)=>{const l=+h.statistics.viewCount,d=+g.statistics.viewCount;switch(o){case"asc":return l-d;case"desc":return d-l;default:return 0}}),e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"sort",type:n,pure:!0}),n})();function Y(n,i){if(1&n&&(t._UZ(0,"app-search-list",1),t.ALo(1,"searchFilter"),t.ALo(2,"sort"),t.ALo(3,"async")),2&n){const e=t.oxw();t.Q6J("searchData",t.xi3(1,1,t.xi3(2,4,t.lcZ(3,7,e.searchData),e.sortParams),e.filterString))}}let E=(()=>{class n{constructor(e,a,r){this.filterService=e,this.searchService=a,this.youtubeFetchService=r,this.filterString="",this.sortParams={sort:void 0,type:void 0}}ngOnInit(){this.searchSub=this.searchService.searchString$.subscribe(e=>{this.searchString=e,this.searchData=this.youtubeFetchService.getVideoList(this.searchString)}),this.sortSub=this.filterService.sortParams$.subscribe(e=>{this.sortParams=e}),this.filterSub=this.filterService.filterString$.subscribe(e=>{this.filterString=e})}ngOnDestroy(){this.sortSub.unsubscribe(),this.filterSub.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.i),t.Y36(C.o),t.Y36(m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-main-page"]],decls:1,vars:1,consts:[[3,"searchData",4,"ngIf"],[3,"searchData"]],template:function(e,a){1&e&&t.YNc(0,Y,4,9,"app-search-list",0),2&e&&t.Q6J("ngIf",a.searchData)},dependencies:[p.O5,U,p.Ov,F,L]}),n})();function J(n,i){if(1&n&&(t.TgZ(0,"div")(1,"mat-card",1)(2,"mat-card-content",2),t._UZ(3,"img",3),t.TgZ(4,"div",4)(5,"mat-card-title",5),t._uU(6),t.qZA(),t.TgZ(7,"p",6),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"div",7)(11,"span",8),t._uU(12,"Description:"),t.qZA(),t.TgZ(13,"p",9),t._uU(14),t.qZA()(),t.TgZ(15,"div",10)(16,"div",11),t._UZ(17,"mat-icon",12),t.TgZ(18,"span",13),t._uU(19),t.qZA()(),t.TgZ(20,"div",11),t._UZ(21,"mat-icon",14),t.TgZ(22,"span",13),t._uU(23),t.qZA()(),t.TgZ(24,"div",11),t._UZ(25,"mat-icon",15),t.TgZ(26,"span",13),t._uU(27),t.qZA()()()(),t.TgZ(28,"a",16),t._UZ(29,"mat-icon",17),t.qZA()()()()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("appDateStatus",e.snippet.publishedAt),t.xp6(2),t.Q6J("src",e.snippet.thumbnails.high.url,t.LSH),t.xp6(3),t.Oqu(e.snippet.title),t.xp6(2),t.Oqu(t.xi3(9,9,e.snippet.publishedAt,"EEEE, MMMM d, y")),t.xp6(6),t.Oqu(e.snippet.description),t.xp6(5),t.Oqu(e.statistics.viewCount),t.xp6(4),t.Oqu(e.statistics.likeCount),t.xp6(4),t.Oqu(e.statistics.commentCount),t.xp6(1),t.Q6J("appDateStatus",e.snippet.publishedAt)}}let Q=(()=>{class n{constructor(e,a){this.route=e,this.youtubeFetchService=a}ngOnInit(){this.route.params.subscribe(e=>{this.cardData$=this.youtubeFetchService.getSingleVideo(e.id)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.gz),t.Y36(m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-detailed-page"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"card",3,"appDateStatus"],[1,"card-content"],[1,"card-img",3,"src"],[1,"card-info"],[1,"mat-title","card-title"],[1,"mat-hint","mat-body-2"],[1,"description"],[1,"mat-title"],[1,"mat-body-1","description-text"],[1,"stat"],[1,"stat-item"],["fontIcon","visibility"],[1,"stat-text"],["fontIcon","favorite"],["fontIcon","comment"],["routerLink","/",1,"back-link",3,"appDateStatus"],["fontIcon","arrow_back_ios"]],template:function(e,a){1&e&&(t.YNc(0,J,30,12,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,a.cardData$))},dependencies:[p.O5,y.Hw,c.a8,c.dn,c.n5,u.yS,S,p.Ov,p.uU],styles:[".card[_ngcontent-%COMP%]{width:90%;margin:30px auto;box-sizing:border-box;border-bottom:10px solid}.card-content[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-evenly;gap:3%}.card-img[_ngcontent-%COMP%]{width:45%;object-fit:contain}.description-text[_ngcontent-%COMP%]{white-space:pre-wrap}.stat[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center}.stat-text[_ngcontent-%COMP%]{margin-left:5px}.back-link[_ngcontent-%COMP%]{position:absolute;top:0;left:-45px;display:flex;padding:5px 0 5px 5px;border-radius:3px 0 0 3px;color:#fff}"]}),n})();const j={provide:v.TP,useClass:class V{constructor(){this.BASE_URL="https://www.googleapis.com/youtube/v3"}intercept(i,e){const a=i.clone({url:this.BASE_URL+i.url,params:i.params.append("key","AIzaSyAHDKr6aBimyuw0ttfvSjaApEdBiv_18Mw")});return e.handle(a)}},multi:!0};let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[m,j],imports:[x.m,u.Bz.forChild([{path:"",component:E},{path:"id/:id",component:Q}]),u.Bz]}),n})()}}]);